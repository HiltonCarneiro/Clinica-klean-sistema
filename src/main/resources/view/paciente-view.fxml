<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="br.com.clinica.controller.PacienteController">

    <center>
        <StackPane>

            <!-- ====================== TELA DE ESCOLHA ====================== -->
            <VBox fx:id="boxEscolha"
                  alignment="CENTER"
                  spacing="18"
                  styleClass="paciente-escolha-root">

                <Label text="Pacientes" styleClass="page-title"/>
                <Label text="Escolha uma opção para continuar" styleClass="page-subtitle"/>

                <VBox alignment="CENTER" spacing="10">
                    <Label text="O que você deseja fazer?" styleClass="section-title"/>

                    <HBox alignment="CENTER" spacing="16" styleClass="choice-row">
                        <Button text="Cadastrar paciente"
                                onAction="#irParaCadastro"
                                prefWidth="230" prefHeight="110"
                                styleClass="choice-card"/>

                        <Button text="Buscar paciente"
                                onAction="#irParaBusca"
                                prefWidth="230" prefHeight="110"
                                styleClass="choice-card"/>
                    </HBox>

                    <Label text="Você pode alternar entre as telas quando quiser." styleClass="hint-text"/>
                </VBox>
            </VBox>

            <!-- ====================== TELA DE CADASTRO ====================== -->
            <ScrollPane fx:id="scrollCadastro" fitToWidth="true" visible="false" managed="false" styleClass="page-scroll">
                <VBox spacing="12" styleClass="page-content">
                    <padding>
                        <Insets top="14" right="16" bottom="16" left="16"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button text="← Voltar" onAction="#voltarEscolha" styleClass="nav-btn"/>
                        <Label text="Cadastro de Pacientes" styleClass="section-title"/>
                    </HBox>

                    <GridPane hgap="10" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints minWidth="120"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                            <ColumnConstraints minWidth="140"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>

                        <Label text="Nome:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtNome" GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.columnSpan="3"/>

                        <Label text="CPF:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtCpf" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Data Nasc.:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        <DatePicker fx:id="dpDataNascimento" GridPane.rowIndex="1" GridPane.columnIndex="3"/>

                        <Label text="Telefone:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtTelefone" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Rua:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtRua" GridPane.rowIndex="3" GridPane.columnIndex="1" GridPane.columnSpan="3"/>

                        <Label text="Número:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtNumero" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                        <CheckBox fx:id="chkSemNumero" text="Sem número"
                                  GridPane.rowIndex="4" GridPane.columnIndex="2" GridPane.columnSpan="2"/>

                        <Label text="Bairro:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtBairro" GridPane.rowIndex="5" GridPane.columnIndex="1"/>

                        <Label text="Cidade:" GridPane.rowIndex="5" GridPane.columnIndex="2"/>
                        <TextField fx:id="txtCidade" GridPane.rowIndex="5" GridPane.columnIndex="3"/>

                        <Label text="CEP:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtCep" GridPane.rowIndex="6" GridPane.columnIndex="1"/>

                        <Label text="UF:" GridPane.rowIndex="6" GridPane.columnIndex="2"/>
                        <TextField fx:id="txtUf" GridPane.rowIndex="6" GridPane.columnIndex="3"/>

                        <Label text="Responsável legal:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                        <TextField fx:id="txtResponsavelLegal"
                                   GridPane.rowIndex="7" GridPane.columnIndex="1" GridPane.columnSpan="3"/>
                    </GridPane>

                    <HBox spacing="10">
                        <Button text="Novo" onAction="#onNovo"/>
                        <Button text="Salvar" onAction="#onSalvar"/>
                        <Button fx:id="btnInativar" text="Inativar" onAction="#onInativar"/>
                        <Button fx:id="btnAtivar" text="Ativar" onAction="#onAtivar"/>
                    </HBox>

                    <HBox spacing="18">
                        <CheckBox fx:id="chkMostrarInativos" text="Mostrar inativos" onAction="#onAtualizarLista"/>
                    </HBox>

                    <Label fx:id="lblMensagem" styleClass="hint-text"/>
                </VBox>
            </ScrollPane>

            <!-- ====================== TELA DE BUSCA ====================== -->
            <VBox fx:id="boxBusca" spacing="12" visible="false" managed="false" styleClass="page-content">
                <padding>
                    <Insets top="14" right="16" bottom="16" left="16"/>
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Button text="← Voltar" onAction="#voltarEscolha" styleClass="nav-btn"/>
                    <Label text="Buscar Paciente" styleClass="section-title"/>
                    <Pane HBox.hgrow="ALWAYS"/>
                    <!-- ✅ BOTÕES -->
                    <Button fx:id="btnEditarSelecionado" text="Editar" onAction="#onEditarSelecionado" disable="true"/>
                    <Button fx:id="btnHistoricoSelecionado" text="Ver histórico" onAction="#onVerHistoricoSelecionado" disable="true"/>
                </HBox>

                <HBox spacing="10">
                    <TextField fx:id="txtBusca" promptText="Nome, CPF ou telefone..." HBox.hgrow="ALWAYS"/>
                    <Button text="Buscar" onAction="#onBuscarPaciente"/>
                    <Button text="Limpar" onAction="#onLimparBusca"/>
                </HBox>

                <HBox spacing="18">
                    <CheckBox fx:id="chkMostrarInativosBusca" text="Mostrar inativos" onAction="#onBuscarPaciente"/>
                </HBox>

                <TableView fx:id="tableBusca" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colBuscaNome" text="Nome" prefWidth="260"/>
                        <TableColumn fx:id="colBuscaCpf" text="CPF" prefWidth="140"/>
                        <TableColumn fx:id="colBuscaTelefone" text="Telefone" prefWidth="140"/>
                        <TableColumn fx:id="colBuscaDataNascimento" text="Data Nasc." prefWidth="110"/>
                        <TableColumn fx:id="colBuscaAtivo" text="Ativo" prefWidth="70"/>
                    </columns>
                </TableView>
            </VBox>

        </StackPane>
    </center>
</BorderPane>